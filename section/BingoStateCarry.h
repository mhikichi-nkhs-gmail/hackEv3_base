#ifndef _BLOCK_STATE_CARRY_H_
#define _BLOCK_STATE_CARRY_H_

#include "BingoState.h"
#include "Section.h"
#include "BlockSectionManager.h"

class BingoStateCarry : public BingoState
{
    public:
        BingoStateCarry(BlockSectionManager *bsm);

        void init();
        //bool run();
        int selectCircle(int current,int idxs[], int &error);
        void rotIdxs(int dir,int idxs[]);


    protected:

    private:

        BINGO_SEC *carry_list[16][8] = {
            {},
            {c1_0, c1_1, c1_2, c1_3,c1_4, c1_5,c1_6,c1_7},
            {c2_0, c2_1, c2_2, c2_3,c2_4, c2_5,c2_6,c2_7},
            {c3_0, c3_1, c3_2,  c3_3,  c3_4,c3_5,c3_6, c3_7},
            {},
            {},
            {},
            {c7_0,c7_1,c7_2, c7_3,c7_4, c7_5,c7_6,c7_7 },          
            {},
            {},
            {0,c10_1,c10_2,    0,c10_4,    0,0,c10_7},        
            {c11_0, c11_1, c11_2,   c11_3,c11_4,  c11_5,c11_6, c11_7},
            {},
            {c13_0, c13_1,c13_2,c13_3,c13_4,c13_5,c13_6,c13_7},          
            {c14_0, c14_1,c14_2, c14_3, c14_4,c14_5,c14_6,  c14_7},
            {c15_0,c15_1,c15_2,c15_3,c15_4,c15_5,c15_6, c15_7},
        };

        int self=10;
        int cost[16][8] = 
        {
            {1000,1000,1000, 1000,1000, 1000,1000,1000}, // 0 なし
            { self,   5,  15,   35,  45,   45,  55,  55}, // 1
            {  65, self,   5,   65,  35,   75,  45,  45},  // 2
            {  75,  65, self,   75,  35,  105,  95,  95},  // 3           
            {1000,1000,1000, 1000,1000, 1000,1000,1000}, //4 なし
            { self,   5,  15,  self,  15,  35,  35,  45}, //5 
            {  95, self,   5,   65,   5,  65,  35,  35}, // 6
            { 105, 105, self,   75, self,   35,  65, 35}, //7             
            {1000,1000,1000, 1000,1000, 1000,1000,1000}, //8 なし
            {  35,  35,  45,  self,  15,  self,   5,  15}, //9
            {1000,  20,  20, 1000,  10, 1000,1000,  10}, //10
            {  75,  65,  35,   75,self,  105,  95, self}, //11           
            {1000,1000,1000, 1000,1000, 1000,1000,1000}, //12 なし
            {  45,  45,  55,   35,  45,  self,   5,  15}, //13
            {  85,  55,  55,   35,  45,  65, self,    5}, //14 
            {  85,  75,  45,  75,  35,  75,  65,  self},  //15          
        };

        //走行体の終了方向リスト
        int dir_list[16][8] = {
            {},//0
            {1,0,0,1,1,1,1,1},//1
            {-2,1,0, -2,1, -2,1,1},//2
            {-2,-2,1, -2, 1,  -2,-2,1},//3
            {},//4
            {},//5
            {},//6
            {-1,-1,1, -2, 1,  -2, -2, 1}, //7         
            {},//8
            {},//9
            {-2,-1,-1,  0, 0, 0,0,0},//10        
            {-2,-2,-1, -2, -1, 1, 1,-1},//11
            {},//12
            {-1,-1,-1,-1,-1,-1,0,0},//13          
            {-2,-1,-1,-2, -1, -2, -1,0},//14
            {-2,-2,-1,-2,-1,-2, -2, -1},//15
        };

        //走行体の終了位置リスト
        int runner_list[16][8] = {
            {},
            {5,1,2, 5,6, 9,9,10},
            {5,6,2, 5,6, 9,10,10}, //2
            {5,6,7, 5,7, 9,10,11},//3
            {},
            {},
            {},
            {5,6,7, 9,11,  9,10,11},//7          
            {},
            {},
            {0,6,6, 0,10, 0,0,10},        
            {5,6,7, 5,7,  9,10,11}, //11
            {},
            {5,5,6, 9,10,  9,13,14 }, //13         
            {5,6,6, 9,10,  9,10,14}, //14
            {5,6,7, 9,11,  9,10,11}, //15 
        };

        static BINGO_SEC c1_0[50],c1_1[50],c1_2[50],c1_3[50],c1_4[50],c1_5[50],c1_6[50],c1_7[50];
        static BINGO_SEC c2_0[50],c2_1[50],c2_2[50],c2_3[50],c2_4[50],c2_5[50],c2_6[50],c2_7[50];
        static BINGO_SEC c3_0[50],c3_1[50],c3_2[50],c3_3[50],c3_4[50],c3_5[50],c3_6[50],c3_7[50];
        static BINGO_SEC c7_0[50],c7_1[50],c7_2[50],c7_3[50],c7_4[50],c7_5[50],c7_6[50],c7_7[50];
        static BINGO_SEC c10_0[50],c10_1[50],c10_2[50],c10_3[50],c10_4[50],c10_5[50],c10_6[50],c10_7[50];
        static BINGO_SEC c11_0[50],c11_1[50],c11_2[50],c11_3[50],c11_4[50],c11_5[50],c11_6[50],c11_7[50];
        static BINGO_SEC c13_0[50],c13_1[50],c13_2[50],c13_3[50],c13_4[50],c13_5[50],c13_6[50],c13_7[50];
        static BINGO_SEC c14_0[50],c14_1[50],c14_2[50],c14_3[50],c14_4[50],c14_5[50],c14_6[50],c14_7[50];
        static BINGO_SEC c15_0[50],c15_1[50],c15_2[50],c15_3[50],c15_4[50],c15_5[50],c15_6[50],c15_7[50];
    
};
#endif